<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Direct Messaging</title>

    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600" rel="stylesheet">

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="/css/reset.min.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/jquery-3.2.1.min.js"></script>
    <style type="text/css">
        #msg-box { background:rgba(255,255,255,0.5);width: 400px; height: 600px; display: none; left: 150px;top:100px;position: absolute; }
        .tip {min-width: 28px;height: 18px;background: red;box-sizing: border-box;color: white;font-size: 13px;
            text-align: center;line-height: 20px;padding: 0 5px;border-radius: 10px;display: inline-block;position: absolute;right: 0px;visibility: hidden}
        .picture{visibility: hidden;width: 320px;height: 200px;position: absolute;top: -200px;left: -2px;
            background-color: white;border:solid 1px lightgrey;padding: 10px;opacity: 1;overflow-y: auto}
        #expression img{margin: 2px}
        #expressionPackage img{width: 85px;height: 85px;margin: 5px}
        .status{position: absolute;right: 60px}
        .userImg{max-width: 100px;max-height: 100px;margin: 5px}
        .chatPicture{margin: 5px}
        .soundImg{width: 20px;height: 15px}
    </style>
    <script src="/js/index.js"></script>
    <script src="/js/impression.js"></script>
    <script src="/js/commons.js"></script>
</head>

<body onload="initAJAX();initFriend();initExpressionGif();initExpressionPackage()">
<audio src="/img/sound/message.wav" id="sound"></audio>
<audio src="" id="msgAudio"></audio>
<!--个人资料卡区域-->
<div id="msg-box">
<div class="msg-box-head"><center><img th:src="${user.getImage()}"></center></div>
    <hr style=" float: bottom;width:80%;margin:0 auto;border: 0;height: 3px;background-image: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0));">
    <div class="msg-box-body">
        <center>
        <div class="msg-box-body-name"><p class="p-name" th:value="${user.getUserName()}">刘泽迪</p></br>
            <p class="p-description">就是蠢</p>
        </div>
        </center>
        <div class="user-info">
            <p class="info">帐号&nbsp;</p>
            <p class="info">出生日期&nbsp;</p>
            <p class="info">性别&nbsp;</p>
            <p class="info">分组&nbsp;</p>
            <p class="info">邮箱&nbsp;</p>
            <p class="info">所在地&nbsp;</p>
            <p class="info">联系电话&nbsp;</p>
        </div>
        <div class="user-info-more">
            <p class="info-more">1053067224</p>
            <p class="info-more">1998.6.26</p>
            <p class="info-more">男</p>
            <p class="info-more">朋友</p>
            <p class="info-more">1053067224@qq.com</p>
            <p class="info-more">江西</p>
            <p class="info-more">15797895764</p>
        </div>
        <hr style=" float: bottom;width:80%;margin:0 auto;border: 0;height: 1px;background-image: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0));">
        <div class="msg-box-bottom">
            <div class="impression">
            </div>
            <div class="comment">
            <input type="text" maxlength="4" id="input-txt" />
            <input type="button" value="评价" id="input-btn" />
            </div>
        </div>
    </div>
</div>

<div class="wrapper">
    <div class="container">
        <div class="left">
            <div class="top">
                <!--个人资料卡区域-->
                <div id="hook">
                    <img id="userIf" width="40px" height="40px" style="float: left;border-radius: 50%;" th:alt="${user.getId()}" th:src="${user.getImage()}">
                </div>

                <input type="text" placeholder="Search" />
                <a href="javascript:;" class="search"></a>
            </div>
            <ul class="people" id="people">

            </ul>
        </div>
        <div class="right">
            <div class="top" style="height: 60px">
                <p class="name" style="margin-left: 190px;font-size: larger;font-weight: bolder"></p>
                <p class="status" style="position: absolute;top: 45px;left: 230px;font-size: smaller;"></p>
            </div>

            <div class="write" id="write" style="width: 480px;margin-left: -15px">
                <label  id="chat-tuxiang" title="发送图片" for="inputImage" class="write-link attach"><input type="file" accept="image/jpg,image/jpeg,image/png" name="file"  id="inputImage" class="hidden"></label>
                <div class="div-textarea" contenteditable="true" style="width: 330px"></div>
                <a href="javascript:void(0)" ><img id="chat-audio" src="/img/audio.png" width="22px" height="20px" style="position: absolute;left: 384px;top: 12px;" title="按住说话"></a>
                <a href="javascript:void(0)" id="chat-biaoqing" class="write-link smiley">
                    <i class="iconfont icon-biaoqing"></i></a>
                <a href="javascript:void(0)"><img id="chat-picture" src="/img/picture.png" width="23px" height="19px" style="position: absolute;left: 415px;top: 12px;"></a>
                <a href="javascript:void(0)" id="chat-fasong" class="write-link send" style="position: absolute;left: 440px"></a>
                <div id="expression" class="picture">
                  <p style="font-size: 12px;font-weight: bolder" >经典表情</p>
                </div>
                <div id="expressionPackage" class="picture" style="width: 360px;height:250px;top: -250px;">
                    <p style="font-size: 12px;font-weight: bolder">表情包</p>
                </div>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
    //个人资料卡悬浮框
    var timer;
    $("#hook,#msg-box").bind("mouseover",showMsgBox);
    $("#hook").bind("mouseout",hideMsgBox);
    $("#msg-box").bind("mouseout",function(){
        if(timer){clearTimeout(timer);}
        $("#msg-box").hide();
    });

    function showMsgBox(){
        if(timer){clearTimeout(timer);}
        $("#msg-box").show();
    }

    function hideMsgBox(){
        timer=setTimeout(function(){
            $("#msg-box").hide();
        },500);
    }

    $(function () {
        $("#chat-biaoqing").click(function () {
            $("#expression").css("visibility","visible")
        })
    })

    $(function () {
        $("#chat-picture").click(function () {
            $("#expressionPackage").css("visibility","visible");
        })
    })


    function getUserinfo() {
        var userId=document.getElementById("userIf").alt;
    }


    function initExpressionGif() {
        for (var i = 1;i<=56;i++)
            $("#expression").append('<img src="/img/expression/'+i+'.gif">');
        $("#expression img").click(function () {
            $(this).clone().appendTo(".div-textarea");
            $("#expression").css("visibility","hidden");
        })
    }
    function initExpressionPackage() {
        for (var i = 1;i<=12;i++)
            $("#expressionPackage").append('<img class="chatPicture" src="/img/picture/picture_'+i+'.jpg">');
        $("#expressionPackage img").click(function () {
            $(this).clone().appendTo(".div-textarea");
            $("#chat-fasong").click();
            $("#expressionPackage").css("visibility","hidden");
        })

        $("#expressionPackage img").mouseover(function () {
            $(this).css({
                "width":"115px",
                "height":"115px",
                "margin":'0px'
            })
        })
        $("#expressionPackage img").mouseleave(function () {
            $(this).css({
                "width":"95px",
                "height":"95px",
                "margin":'0px'
            })
        })
    }
</script>
</body>

</html>
